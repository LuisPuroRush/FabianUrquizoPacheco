<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Internet</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/print-js/1.6.0/print.min.css">
    <style>
        body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #f8f9fa;
    display: flex;
}

.sidebar {
    background-color: white;
    width: 250px;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 10px 0;
    border-right: 1px solid #e0e0e0;
}

.sidebar img {
    width: 100px;
    margin-bottom: 15px;
}

.sidebar h1, .sidebar h2 {
    font-size: 1rem;
    text-align: center;
    margin: 10px 0;
    font-weight: bold;
    color: #555;
}

.sidebar ul {
    list-style: none;
    padding: 0;
    width: 90%;
}

.sidebar ul li {
    padding: 10px;
    font-size: 0.9rem;
    cursor: pointer;
    text-align: center;
    border-bottom: 1px solid #e0e0e0;
    color: #333;
    transition: background-color 0.3s, color 0.3s;
}

.sidebar ul li:hover {
    background-color: #f1f1f1;
}

.content {
    flex: 1;
    padding: 20px;
    overflow: auto;
}

.title {
    font-size: 1.5rem;
    font-weight: bold;
    text-align: center;
    margin-bottom: 20px;
}

.actions {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-bottom: 15px;
}

.actions button {
    padding: 12px 25px;
    font-size: 1rem;
    cursor: pointer;
    border: none;
    border-radius: 25px;
    background: linear-gradient(90deg, #6a11cb, #2575fc);
    color: white;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
}

.actions button:hover {
    background-color: #2c79e3;
    transform: translateY(-2px);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
}

table {
    width: 100%;
    border-collapse: collapse;
    font-size: 1rem;
    text-align: center;
    margin: 0 auto;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

table th, table td {
    padding: 12px;
    border: 1px solid #ddd;
}

table th {
    background-color: #5f72be;
    color: white;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

table tr:hover {
    background-color: #f5f7fa;
    cursor: pointer;
}

table tr.selected {
    background-color: #d7e9f7 !important;
    color: #333;
}

.search-bar {
    text-align: center;
    margin-bottom: 15px;
}

.search-bar input {
    padding: 10px;
    font-size: 1rem;
    width: 60%;
    border: 1px solid #ddd;
    border-radius: 5px;
}

.plans-container {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    justify-content: center;
}

.plan {
    background: white;
    border: 1px solid #ddd;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    padding: 15px;
    text-align: center;
    width: 250px;
}

.plan h3 {
    font-size: 1.2rem;
    margin-bottom: 10px;
}

.plan p {
    font-size: 1rem;
    margin: 5px 0;
}

.plan button {
    margin-top: 10px;
    padding: 10px 15px;
    border: none;
    background: #4caf50;
    color: white;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.3s;
}

.plan button:hover {
    background: #45a049;
}

.remaining-time {
    font-weight: bold;
    color: #ff5722;
}

#bienvenida p {
    font-size: 1rem;
    color: #333;
}

#suscripciones {
    display: none;
}

#planes {
    display: none;
}

    </style>
</head>
<body>
    <div class="sidebar">
        <img src="logo.png" alt="Logo">
        <h1>EMPRESA PERUANA / 20 AÑOS</h1>
        <h2>Mantenimiento</h2>
        <ul>
            <li onclick="showSection('suscripciones')">Suscripciones</li>
            <li onclick="showSection('planes')">Planes</li>
            <li onclick="showSection('descuentos')">Descuentos</li>
        </ul>
        <h2>Soporte</h2>
        <ul>
            <li onclick="showSection('cliente')">Cliente</li>
        </ul>
        <ul>
            <li onclick="location.href='index.html';">Cerrar Sesión</li>
        </ul>
    </div>
    <div class="content">
        <div id="bienvenida">
            <div class="title">Bienvenido al Dashboard</div>
            <p style="text-align: center;">Selecciona una opción del menú para comenzar.</p>
        </div>

        <!-- Suscripciones -->
        <div id="suscripciones" style="display: none;">
            <div class="title">Revisión de Suscripciones</div>
            <div class="search-bar">
                <input type="text" id="searchBox" placeholder="Buscar por nombre..." oninput="searchByName()">
            </div>
            <div class="actions">
                <button onclick="printTable()">Imprimir</button>
                <button onclick="toggleCancelados()">Mostrar Cancelados</button>
            </div>
            <table id="subscriptionTable">
                <thead>
                    <tr>
                        <th>Cliente</th>
                        <th>Plan</th>
                        <th>Meses</th>
                        <th>Descuento</th>
                        <th>Estado</th>
                        <th>Fecha Inicio</th>
                        <th>Fecha Fin</th>
                        <th>Tiempo Restante</th>
                    </tr>
                </thead>
                <tbody>
                    <tr onclick="selectRow(this)">
                        <td>Juan Pérez</td>
                        <td>Básico</td>
                        <td>12</td>
                        <td>10%</td>
                        <td>Activo</td>
                        <td>2024-01-01</td>
                        <td>2024-12-31</td>
                        <td class="remaining-time" data-end-date="2024-12-31"></td>
                    </tr>
                    <tr onclick="selectRow(this)">
                        <td>María López</td>
                        <td>Premium</td>
                        <td>6</td>
                        <td>15%</td>
                        <td>Cancelado</td>
                        <td>2024-06-01</td>
                        <td>2024-12-01</td>
                        <td class="remaining-time" data-end-date="2024-12-01"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Planes -->
        <div id="planes" style="display: none;">
            <div class="title">Gestión de Planes</div>
            <div id="plansContainer" class="plans-container">
                <div class="plan">
                    <h3>Plan Básico</h3>
                    <p>Velocidad: 50 Mbps</p>
                    <p>Precio: S/ 50.00</p>
                    <button onclick="editPlan(this)">Editar</button>
                </div>
                <div class="plan">
                    <h3>Plan Estándar</h3>
                    <p>Velocidad: 100 Mbps</p>
                    <p>Precio: S/ 80.00</p>
                    <button onclick="editPlan(this)">Editar</button>
                </div>
                <div class="plan">
                    <h3>Plan Premium</h3>
                    <p>Velocidad: 200 Mbps</p>
                    <p>Precio: S/ 120.00</p>
                    <button onclick="editPlan(this)">Editar</button>
                </div>
            </div>
            <div class="actions">
                <button onclick="addPlan()">Agregar Plan</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/print-js/1.6.0/print.min.js"></script>
    <script>
        // Función para cambiar de sección
function showSection(section) {
    const sections = document.querySelectorAll('.content > div');
    sections.forEach(sec => {
        sec.style.display = 'none';
    });

    const sectionToShow = document.getElementById(section);
    if (sectionToShow) {
        sectionToShow.style.display = 'block';
    }
}

// Función para buscar por nombre de cliente
function searchByName() {
    const input = document.getElementById("searchBox");
    const filter = input.value.toLowerCase();
    const rows = document.querySelectorAll("#subscriptionTable tbody tr");

    rows.forEach(row => {
        const name = row.cells[0].textContent.toLowerCase();
        if (name.indexOf(filter) > -1) {
            row.style.display = "";
        } else {
            row.style.display = "none";
        }
    });
}

// Función para calcular el tiempo restante
function calculateRemainingTime() {
    const rows = document.querySelectorAll('#subscriptionTable tbody tr');
    rows.forEach(row => {
        const endDate = row.querySelector('.remaining-time').getAttribute('data-end-date');
        const end = new Date(endDate);
        const now = new Date();
        const diffTime = end - now;
        const daysRemaining = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

        row.querySelector('.remaining-time').textContent = `${daysRemaining} días restantes`;
    });
}

// Función para seleccionar una fila de la tabla
function selectRow(row) {
    const rows = document.querySelectorAll("#subscriptionTable tbody tr");
    rows.forEach(r => r.classList.remove("selected"));
    row.classList.add("selected");
}

// Función para imprimir la tabla
function printTable() {
    printJS({
        printable: 'subscriptionTable',
        type: 'html',
        targetStyles: ['*']
    });
}

// Función para alternar la visibilidad de los planes cancelados
function toggleCancelados() {
    const rows = document.querySelectorAll('#subscriptionTable tbody tr');
    rows.forEach(row => {
        const status = row.cells[4].textContent;
        if (status === 'Cancelado') {
            if (row.style.display === 'none') {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        }
    });
}

// Función para agregar un nuevo plan
function addPlan() {
    const planContainer = document.getElementById("plansContainer");
    const newPlan = document.createElement('div');
    newPlan.classList.add('plan');
    newPlan.innerHTML = `
        <h3>Nuevo Plan</h3>
        <p>Velocidad: 0 Mbps</p>
        <p>Precio: S/ 0.00</p>
        <button onclick="editPlan(this)">Editar</button>
    `;
    planContainer.appendChild(newPlan);
}

// Función para editar un plan
function editPlan(button) {
    const plan = button.closest('.plan');
    const planName = plan.querySelector('h3');
    const planSpeed = plan.querySelector('p:first-of-type');
    const planPrice = plan.querySelector('p:last-of-type');

    const newName = prompt("Nuevo nombre para el plan:", planName.textContent);
    const newSpeed = prompt("Nueva velocidad (Mbps):", planSpeed.textContent.replace('Velocidad: ', '').replace(' Mbps', ''));
    const newPrice = prompt("Nuevo precio:", planPrice.textContent.replace('Precio: S/ ', '').replace('00', ''));

    if (newName && newSpeed && newPrice) {
        planName.textContent = newName;
        planSpeed.textContent = `Velocidad: ${newSpeed} Mbps`;
        planPrice.textContent = `Precio: S/ ${newPrice}.00`;
    }
}

// Inicialización de funciones después de cargar la página
document.addEventListener('DOMContentLoaded', function() {
    showSection('bienvenida'); // Mostrar bienvenida al inicio
    calculateRemainingTime(); // Calcular tiempo restante al cargar la página
});

    </script>
</body>
</html>
